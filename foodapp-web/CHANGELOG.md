# 前端更新日志

## 适配AIScale后端数据结构调整

### 主要变更

1. **Account数据结构调整**
   - 添加了`OrgID`字段，关联到组织（中队）
   - 将`Status`字段改为`IsDeleted`字段（0=正常，1=已删除）
   - 角色定义：0=用户，1=管理员

2. **新增中队管理功能**
   - 创建了`Organizations.vue`页面用于中队管理
   - 支持中队的增删改查操作
   - 支持层级结构（上级中队选择）
   - 支持自动生成中队编码

3. **API接口更新**
   - 创建了`/src/api/organ.ts`文件，提供组织管理API
   - 更新了`/src/api/acl.ts`，添加了`org_id`字段支持
   - 添加了账户更新接口

4. **页面功能增强**
   - 账户管理页面添加了中队选择功能
   - 更新了表格显示，增加中队名称列
   - 优化了表单验证和用户体验

5. **路由和导航更新**
   - 添加了中队管理页面路由
   - 在左侧导航菜单中增加了"中队管理"选项

### 文件变更列表

#### 新增文件
- `src/api/organ.ts` - 组织管理API接口
- `src/pages/Organizations.vue` - 中队管理页面
- `CHANGELOG.md` - 更新日志

#### 修改文件
- `src/api/acl.ts` - 更新账户API，添加org_id支持
- `src/pages/Accounts.vue` - 添加中队选择功能，更新数据结构
- `src/router/index.ts` - 添加中队管理路由
- `src/App.vue` - 添加中队管理菜单项
- `src/utils/role.ts` - 更新状态定义

### 技术细节

1. **数据结构对齐**
   - 前端类型定义与后端Go结构体保持一致
   - 使用TypeScript接口确保类型安全

2. **权限控制**
   - 中队管理功能仅管理员可访问
   - 账户管理中的中队选择功能对所有用户开放

3. **用户体验优化**
   - 添加了加载状态和错误处理
   - 提供了友好的表单验证提示
   - 支持搜索和分页功能

4. **代码质量**
   - 使用Vue 3 Composition API
   - 遵循TypeScript最佳实践
   - 保持代码结构清晰和可维护性

### 使用说明

1. **中队管理**
   - 管理员可以创建、编辑、删除中队
   - 支持设置上级中队，形成层级结构
   - 中队编码可以自动生成或手动设置

2. **账户管理**
   - 创建账户时必须选择所属中队
   - 编辑账户时可以修改所属中队
   - 表格中显示账户所属中队名称

3. **权限说明**
   - 只有管理员可以管理中队
   - 只有管理员可以创建和删除账户
   - 普通用户可以修改自己的密码